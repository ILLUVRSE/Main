# Marketplace â€” example environment variables (local/dev)
# -----------------------------------------
# General
NODE_ENV=development
PORT=8080

# Postgres (used by run-local.sh defaults)
DATABASE_URL=postgres://postgres:postgres@127.0.0.1:5432/marketplace

# S3 / MinIO (artifact + audit buckets)
S3_ENDPOINT=http://127.0.0.1:9000
S3_BUCKET=marketplace-artifacts
S3_AUDIT_BUCKET=marketplace-audit
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=minio
S3_SECRET_ACCESS_KEY=minio123

# CDN / Edge (for production)
CDN_ORIGIN=http://127.0.0.1:3000
CDN_URL=http://localhost:3000

# Kernel (manifest verification, audit ingestion)
KERNEL_API_URL=http://127.0.0.1:6050
# Either a control-panel/server token OR mTLS client cert/key (production)
KERNEL_CONTROL_PANEL_TOKEN=changeme
# If using mTLS, point to files or provide the cert/key inline via secret manager
KERNEL_CLIENT_CERT=
KERNEL_CLIENT_KEY=

# Signing / KMS / Signing-proxy
SIGNING_PROXY_URL=http://127.0.0.1:7000
SIGNING_PROXY_API_KEY=changeme
AUDIT_SIGNING_KMS_KEY_ID=arn:aws:kms:us-east-1:123456789012:key/abcd
AUDIT_SIGNING_ALG=RSA_PKCS1_SHA_256

# Finance service
FINANCE_API_URL=http://127.0.0.1:8050
FINANCE_SERVICE_TOKEN=changeme

# Payment provider settings (Stripe/webhook or mock)
PAYMENT_PROVIDER_TYPE=mock           # "stripe" or "mock"
PAYMENT_PROVIDER_STRIPE_WEBHOOK_SECRET=whsec_xxx

# Preview sandbox
PREVIEW_SANDBOX_POOL_CONFIG='{"poolSize":3,"cpuLimitMillis":500,"memoryMb":512}'

# Observability & SRE
PROM_ENDPOINT=http://127.0.0.1:9090
SENTRY_DSN=
OTEL_COLLECTOR_URL=

# Production guards / CI flags (booleans as strings)
REQUIRE_SIGNING_PROXY=false
REQUIRE_KMS=false
DEV_SKIP_MTLS=true   # set to false in prod

# Local / development helpers
RUN_LOCAL=1
# For local audit signing (dev only). In production, do NOT set private keys here.
AUDIT_SIGNING_PRIVATE_KEY=

# Test / E2E helpers
MARKETPLACE_TEST_BUYER_TOKEN=                 # optional: test buyer JWT for e2e
SIGNER_PUBLIC_KEY_PEM=                        # optional: PEM for verifying signed proofs in e2e

# Misc
AUDIT_EXPORT_BUCKET=illuvrse-audit-archive-dev

# NOTES:
# - Never store real secrets in git. Use Vault/Secret Manager and inject secrets at runtime.
# - In production, prefer mTLS for Kernel/Finance and KMS or a signing-proxy for signing.

# Added for Next.js frontend
DATABASE_URL=postgres://postgres:postgres@localhost:5432/illuvrse
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=marketplace
