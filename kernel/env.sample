# Kernel service - example environment variables (DO NOT COMMIT REAL SECRETS)
# Copy to .env or provide via environment (Docker / systemd / K8s) and keep secrets in Vault/KMS.

# Server
PORT=3000
NODE_ENV=development
LOG_LEVEL=debug

# Postgres (example local dev URL)
# Use a managed Postgres or a local docker-compose instance for dev.
POSTGRES_URL=postgresql://postgres:postgres@localhost:5432/illuvrse
POSTGRES_SSL=false

# OpenAPI (optional override)
# By default server expects kernel/openapi.yaml relative to compiled src path.
OPENAPI_PATH=kernel/openapi.yaml

# KMS / Signing
# Provide the KMS endpoint for production signing. If empty, server falls back to local ephemeral keys (dev only).
KMS_ENDPOINT=
SIGNER_ID=kernel-signer-local
KMS_BEARER_TOKEN=
# Mutual TLS (optional): paths to PEM cert/key used for client authentication to KMS
KMS_MTLS_CERT_PATH=
KMS_MTLS_KEY_PATH=
# Optional CA bundle to verify KMS server certificate
KMS_MTLS_CA_PATH=
KMS_TIMEOUT_MS=5000

# SentinelNet / policy engine (optional)
SENTINEL_URL=

# Misc timeouts / limits
REQUEST_BODY_LIMIT=1mb

# Operational: set true in CI/prod to enable stricter checks
REQUIRE_KMS=true

# Notes:
# - DO NOT COMMIT SECRETS. Use Vault/KMS and environment variables to inject credentials.
# - For local dev you can leave KMS_ENDPOINT blank (server will use ephemeral local signing â€” NOT for production).
# - After configuring POSTGRES_URL, run: npm run migrate

